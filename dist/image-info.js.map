{"version":3,"sources":["image-info.js"],"names":[],"mappings":";;AAAA,CAAC,UAAU,MAAV,EAAkB;AACf,iBADe;;AAGf,QAAI,YAAY,EAAZ,CAHW;AAIf,QAAI,OAAO,QAAP,EAAiB;AACjB,eAAO,OAAP,GAAiB,SAAjB,CADiB;KAArB,MAEO;AACH,eAAO,SAAP,GAAmB,SAAnB,CADG;KAFP;;AAMA,cAAU,eAAV,GAA4B,UAAU,KAAV,EAAiB,MAAjB,EAAyB;AACjD,YAAI,OAAO,QAAP,EAAiB;;AAEjB,gBAAI,MAAM,qBAAqB,UAArB,CAFO;AAGjB,gBAAI,YAAY,EAAE,OAAO,KAAP,EAAc,QAAQ,MAAR,EAA5B,CAHa;AAIjB,sBAAU,IAAV,GAAiB,IAAI,GAAJ,CAAQ,QAAQ,MAAR,GAAiB,CAAjB,CAAzB,CAJiB;AAKjB,mBAAO,SAAP,CALiB;SAArB;;AAQA,YAAI,MAAM,OAAO,QAAP,CAAgB,aAAhB,CAA8B,QAA9B,EAAwC,UAAxC,CAAmD,IAAnD,CAAN,CAT6C;AAUjD,eAAO,IAAI,eAAJ,CAAoB,KAApB,EAA2B,MAA3B,CAAP,CAViD;KAAzB,CAVb;;AAuBf,cAAU,aAAV,GAA0B,UAAU,SAAV,EAAqB;AAC3C,YAAI,YAAY,UAAU,eAAV,CAA0B,UAAU,KAAV,EAAiB,UAAU,MAAV,CAAvD,CADuC;;AAG3C,kBAAU,MAAV,GAAmB,EAAnB,CAH2C;;AAK3C,aAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,UAAU,SAAV,EAAJ,EAA2B,GAA3C,EAAgD;AAC5C,gBAAI,YAAY,UAAU,SAAV,CAAoB,CAApB,CAAZ,CADwC;;AAG5C,gBAAI,QAAQ,UAAU,KAAV,CAHgC;AAI5C,gBAAI,SAAS,UAAU,MAAV,CAJ+B;AAK5C,gBAAI,QAAQ,UAAU,eAAV,CAA0B,KAA1B,EAAiC,MAAjC,CAAR,CALwC;;AAO5C,kBAAM,WAAN,GAAoB,UAAU,WAAV,CAPwB;AAQ5C,kBAAM,WAAN,GAAoB,UAAU,WAAV,CARwB;AAS5C,kBAAM,KAAN,GAAc,UAAU,KAAV,CAT8B;AAU5C,kBAAM,QAAN,GAAiB,UAAU,QAAV,CAV2B;AAW5C,kBAAM,iBAAN,GAA0B,UAAU,iBAAV,CAXkB;AAY5C,kBAAM,UAAN,GAAmB,UAAU,UAAV,CAZyB;AAa5C,kBAAM,cAAN,GAAuB,UAAU,cAAV,CAbqB;AAc5C,kBAAM,iBAAN,GAA0B,UAAU,iBAAV,CAdkB;AAe5C,kBAAM,CAAN,GAAU,UAAU,CAAV,CAfkC;AAgB5C,kBAAM,CAAN,GAAU,UAAU,CAAV,CAhBkC;AAiB5C,sBAAU,sBAAV,CAAiC,CAAjC,EAAoC,MAAM,IAAN,CAApC,CAjB4C;AAkB5C,sBAAU,MAAV,CAAiB,CAAjB,IAAsB,KAAtB,CAlB4C;;AAoB5C,gBAAI,MAAM,KAAN,EAAa;AACb,sBAAM,KAAN,GAAc,MAAM,KAAN,GAAc,EAAd;AADD,aAAjB;SApBJ;;AAyBA,kBAAU,SAAV,GAAsB,UAAU,SAAV,EAAtB,CA9B2C;AA+B3C,YAAI,CAAC,UAAU,SAAV,EAAqB;AACtB,sBAAU,SAAV,GAAsB,CAAC,CAAD,CADA;SAA1B;;AAIA,eAAO,SAAP,CAnC2C;KAArB,CAvBX;CAAlB,CAAD,CA6DG,OAAO,MAAP,KAAkB,WAAlB,GAAgC,MAAhC,GAAyC,MAAzC,CA7DH","file":"image-info.js","sourcesContent":["(function (global) {\r\n    'use strict';\r\n\r\n    var ImageInfo = {};    \r\n    if (global.__isNode) {\r\n        module.exports = ImageInfo;\r\n    } else {\r\n        global.ImageInfo = ImageInfo;\r\n    }\r\n\r\n    ImageInfo.createImageData = function (width, height) {\r\n        if (global.__isNode) {\r\n            // ReSharper disable once InconsistentNaming\r\n            var U8A = Uint8ClampedArray || Uint8Array;\r\n            var imageData = { width: width, height: height };\r\n            imageData.data = new U8A(width * height * 4);\r\n            return imageData;\r\n        }\r\n        \r\n        var ctx = window.document.createElement('canvas').getContext('2d');\r\n        return ctx.createImageData(width, height);\r\n    };\r\n    \r\n    ImageInfo.fromGifReader = function (gifReader) {\r\n        var imageData = ImageInfo.createImageData(gifReader.width, gifReader.height);\r\n        \r\n        imageData.frames = [];\r\n        \r\n        for (var i = 0; i < gifReader.numFrames(); i++) {\r\n            var frameInfo = gifReader.frameInfo(i);\r\n            \r\n            var width = frameInfo.width;\r\n            var height = frameInfo.height;\r\n            var frame = ImageInfo.createImageData(width, height);\r\n            \r\n            frame.data_length = frameInfo.data_length;\r\n            frame.data_offset = frameInfo.data_offset;\r\n            frame.delay = frameInfo.delay;\r\n            frame.disposal = frameInfo.disposal;\r\n            frame.has_local_palette = frameInfo.has_local_palette;\r\n            frame.interlaced = frameInfo.interlaced;\r\n            frame.palette_offset = frameInfo.palette_offset;\r\n            frame.transparent_index = frameInfo.transparent_index;\r\n            frame.x = frameInfo.x;\r\n            frame.y = frameInfo.y;\r\n            gifReader.decodeAndBlitFrameRGBA(i, frame.data);\r\n            imageData.frames[i] = frame;\r\n            \r\n            if (frame.delay) {\r\n                frame.delay = frame.delay * 10; // bugfix\r\n            }\r\n        }\r\n        \r\n        imageData.loopCount = gifReader.loopCount();\r\n        if (!imageData.loopCount) {\r\n            imageData.loopCount = -1;\r\n        }\r\n        \r\n        return imageData;\r\n    };\r\n\r\n})(typeof window === 'undefined' ? global : window);"],"sourceRoot":"/source/"}