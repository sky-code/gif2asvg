function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}!function(e){"use strict";e.__isNode="undefined"==typeof window}("undefined"==typeof window?global:window),function(e){"use strict";var a={};e.__isNode?module.exports=a:e.ImageInfo=a,a.createImageData=function(a,t){if(e.__isNode){var n=Uint8ClampedArray||Uint8Array,i={width:a,height:t};return i.data=new n(a*t*4),i}var r=window.document.createElement("canvas").getContext("2d");return r.createImageData(a,t)},a.fromGifReader=function(e){var t=a.createImageData(e.width,e.height);t.frames=[];for(var n=0;n<e.numFrames();n++){var i=e.frameInfo(n),r=i.width,o=i.height,g=a.createImageData(r,o);g.data_length=i.data_length,g.data_offset=i.data_offset,g.delay=i.delay,g.disposal=i.disposal,g.has_local_palette=i.has_local_palette,g.interlaced=i.interlaced,g.palette_offset=i.palette_offset,g.transparent_index=i.transparent_index,g.x=i.x,g.y=i.y,e.decodeAndBlitFrameRGBA(n,g.data),t.frames[n]=g,g.delay&&(g.delay=10*g.delay)}return t.loopCount=e.loopCount(),t.loopCount||(t.loopCount=-1),t}}("undefined"==typeof window?global:window);var _createClass=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}();!function(e){"use strict";var a,t,n=e.btoa;e.__isNode?(a=require("omggif"),t=require("./image-info"),n=require("btoa")):(a={GifWriter:e.GifWriter,GifReader:e.GifReader},t=e.ImageInfo);var i=function(){function i(){_classCallCheck(this,i),this.isNode="undefined"==typeof window,this.q='"'}return _createClass(i,[{key:"convertDataURIToBinary",value:function(e){for(var a=";base64,",t=e.indexOf(a)+a.length,n=e.substring(t),i=window.atob(n),r=i.length,o=new Uint8Array(new ArrayBuffer(r)),g=0;r>g;g++)o[g]=i.charCodeAt(g);return o}},{key:"convertBinaryToBase64",value:function(e){for(var a,t=32768,i=0,r=e.length,o="";r>i;)a=e.subarray(i,Math.min(i+t,r)),o+=String.fromCharCode.apply(null,a),i+=t;return n(o)}},{key:"encodeSvgAsBase64",value:function(e){return"data:image/svg+xml;base64,"+n(e)}},{key:"wrapInSvgHeader",value:function(e,a,t){var n=this.q,i="<svg xmlns="+n+"http://www.w3.org/2000/svg"+n+" xmlns:A="+n+"http://www.w3.org/1999/xlink"+n+" width="+n+a+n+" height="+n+t+n+">",r="</svg>";return i+e+r}},{key:"smilSvgAnimationFromBase64Gif",value:function(e,a){return this.smilSvgAnimationFromImageDataGif(this.convertDataURIToBinary(e),a)}},{key:"smilSvgAnimationFromImageDataGif",value:function(e,a){var t=this,n=document.createElement("div"),i=document.createElement("img");n.appendChild(i);var r=SuperGif({gif:i,auto_play:!1,draw_while_loading:!1,show_progress_bar:!1});return r.load_raw(e,function(){var e=r.get_canvas(),n=r.get_frames(),i=[];i.width=e.width,i.height=e.height;for(var o=0;o<n.length;o++){var g=n[o];r.move_to(o);var s=e.toDataURL("image/png"),d=g.delay;d&&(d=10*d),i.push({imageDataUrl:s,delay:d})}var l=t.smilSvgAnimationFromWebFrames(i);a&&a(l),console.log("get_playing: "+r.get_playing()),console.log("get_canvas: "+r.get_canvas()),console.log("get_canvas_scale: "+r.get_canvas_scale()),console.log("get_loading: "+r.get_loading()),console.log("get_auto_play: "+r.get_auto_play()),console.log("get_length: "+r.get_length()),console.log("get_current_frame: "+r.get_current_frame()),alert("loaded")}),""}},{key:"cssSvgAnimationFromImageDataGif",value:function(e){var n=new a.GifReader(e),i=t.fromGifReader(n);return this.cssSvgAnimationFromImageDataFramesGif(i)}},{key:"_encodeImageDataToPngCanvas",value:function(e){var a=window.document.createElement("canvas");a.width=e.width,a.height=e.height;var t=a.getContext("2d");return t.putImageData(e,0,0),a.toDataURL("image/png")}},{key:"_encodeImageDataToPngNodeJs",value:function(e){var a=require("pngjs").PNG,t=new a;t.width=e.width,t.height=e.height,t.data=new Buffer(e.data);var n=a.sync.write(t),i="data:image/png;base64,"+this.convertBinaryToBase64(n);return i}},{key:"encodeImageDataToPng",value:function(a){return e.__isNode?this._encodeImageDataToPngNodeJs(a):this._encodeImageDataToPngCanvas(a)}},{key:"generateImageId",value:function(e,a){return"F"+a}},{key:"generateAnimationId",value:function(e,a){return"A"+a}},{key:"cssSvgAnimationFromImageDataFramesGif",value:function(e){for(var a=(this.q,""),t="",n=0;n<e.frames.length;n++){var i=e.frames[n],r=(this.encodeImageDataToPng(i),this.generateImageId(e,n),"<image id=$ { q } $ { imageId } $ { q } height = $ { q } 100 % $ { q } width = $ { q } 0$ { q } A: href = $ { q } $ { pngImageDataUri } $ { q }/>"),o=(this.generateAnimationId(e,n),"");o+=0===n?" $ { this.generateAnimationId(imageData, imageData.frames.length - 1) }.end; 0s":" $ { this.generateAnimationId(imageData, i - 1) }.end;";var g="<set id=$ { q } $ { setTagId } $ { q } A: href = $ { q }# $ { imageId } $ { q } attributeName = $ { q } width$ { q } to = $ { q } 100 % $ { q } dur = $ { q } $ { frame.delay } ms$ { q } begin = $ { q } $ { begin } $ { q }/>";t+=g,a+=r}return a+=t,a=this.wrapInSvgHeader(a,e.width,e.height)}},{key:"smilSvgAnimationFromWebFrames",value:function(e){for(var a=this.q,t="",n="",i=0;i<e.length;i++){var r=e[i],o=r.imageDataUrl,g=this.generateImageId(r,i),s="<image id="+a+g+a+" height="+a+"100%"+a+" width="+a+"0"+a+" A:href="+a+o+a+"/>",d=this.generateAnimationId(r,i),l="";l+=0===i?this.generateAnimationId(r,e.length-1)+".end; 0s":this.generateAnimationId(r,i-1)+".end;";var u="<set id="+a+d+a+" A:href="+a+"#"+g+a+" attributeName="+a+"width"+a+" to="+a+"100%"+a+" dur="+a+r.delay+"ms"+a+" begin="+a+l+a+"/>";n+=u,t+=s}return t+=n,t=this.wrapInSvgHeader(t,e.width,e.height)}}]),i}();e.__isNode?module.exports=i:e.gif2asvg=i}("undefined"==typeof window?global:window),function(e){"use strict";var a;a=e.__isNode?require("./dist/gif2asvg"):e.gif2asvg,a.prototype.wrapInSvgHeader=function(e,a,t){var n=this.q,i='<svg id="ts0000000000000000" xmlns='+n+"http://www.w3.org/2000/svg"+n+" xmlns:A="+n+"http://www.w3.org/1999/xlink"+n+" width="+n+a+n+" height="+n+t+n+">",r="</svg>";return i+e+r}}("undefined"==typeof window?global:window);
//# sourceMappingURL=gif2asvg.full.min.js.map
