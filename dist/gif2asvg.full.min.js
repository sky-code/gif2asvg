function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}!function(e){"use strict";e.__isNode="undefined"==typeof window}("undefined"==typeof window?global:window),function(e){"use strict";var a;a=e.__isNode?require("./dist/gif2asvg"):e.gif2asvg,a.prototype.wrapInSvgHeader=function(e,a,t){var n=this.q,i='<svg id="ts0000000000000000" xmlns='+n+"http://www.w3.org/2000/svg"+n+" xmlns:A="+n+"http://www.w3.org/1999/xlink"+n+" width="+n+a+n+" height="+n+t+n+">",r="</svg>";return i+e+r}}("undefined"==typeof window?global:window),function(e){"use strict";var a={};e.__isNode?module.exports=a:e.ImageInfo=a,a.createImageData=function(a,t){if(e.__isNode){var n=Uint8ClampedArray||Uint8Array,i={width:a,height:t};return i.data=new n(a*t*4),i}var r=window.document.createElement("canvas").getContext("2d");return r.createImageData(a,t)},a.fromGifReader=function(e){var t=a.createImageData(e.width,e.height);t.frames=[];for(var n=0;n<e.numFrames();n++){var i=e.frameInfo(n),r=i.width,o=i.height,d=a.createImageData(r,o);d.data_length=i.data_length,d.data_offset=i.data_offset,d.delay=i.delay,d.disposal=i.disposal,d.has_local_palette=i.has_local_palette,d.interlaced=i.interlaced,d.palette_offset=i.palette_offset,d.transparent_index=i.transparent_index,d.x=i.x,d.y=i.y,e.decodeAndBlitFrameRGBA(n,d.data),t.frames[n]=d,d.delay&&(d.delay=10*d.delay)}return t.loopCount=e.loopCount(),t.loopCount||(t.loopCount=-1),t}}("undefined"==typeof window?global:window);var _createClass=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}();!function(e){"use strict";var a,t;e.__isNode?(a=require("omggif"),t=require("./image-info")):(a={GifWriter:e.GifWriter,GifReader:e.GifReader},t=e.ImageInfo);var n=e.btoa;e.__isNode&&"undefined"===n&&(n=require("btoa"));var i=function(){function i(){_classCallCheck(this,i),this.isNode="undefined"==typeof window,this.q='"'}return _createClass(i,[{key:"convertDataURIToBinary",value:function(e){for(var a=";base64,",t=e.indexOf(a)+a.length,n=e.substring(t),i=window.atob(n),r=i.length,o=new Uint8Array(new ArrayBuffer(r)),d=0;r>d;d++)o[d]=i.charCodeAt(d);return o}},{key:"convertBinaryToBase64",value:function(e){for(var a,t=32768,i=0,r=e.length,o="";r>i;)a=e.subarray(i,Math.min(i+t,r)),o+=String.fromCharCode.apply(null,a),i+=t;return n(o)}},{key:"encodeSvgAsBase64",value:function(e){return"data:image/svg+xml;base64,"+n(e)}},{key:"wrapInSvgHeader",value:function(e,a,t){var n=this.q,i="<svg xmlns="+n+"http://www.w3.org/2000/svg"+n+" xmlns:A="+n+"http://www.w3.org/1999/xlink"+n+" width="+n+a+n+" height="+n+t+n+">",r="</svg>";return i+e+r}},{key:"smilSvgAnimationFromBase64Gif",value:function(e){return this.smilSvgAnimationFromImageDataGif(this.convertDataURIToBinary(e))}},{key:"smilSvgAnimationFromImageDataGif",value:function(e){var n=new a.GifReader(e),i=t.fromGifReader(n);return this.smilSvgAnimationFromImageDataFramesGif(i)}},{key:"_encodeImageDataToPngCanvas",value:function(e){var a=window.document.createElement("canvas");a.width=e.width,a.height=e.height;var t=a.getContext("2d");return t.putImageData(e,0,0),a.toDataURL("image/png")}},{key:"_encodeImageDataToPngNodeJs",value:function(e){var a=require("pngjs").PNG,t=new a;t.width=e.width,t.height=e.height,t.data=new Buffer(e.data);var n=a.sync.write(t),i="data:image/png;base64,"+this.convertBinaryToBase64(n);return i}},{key:"encodeImageDataToPng",value:function(a){return e.__isNode?this._encodeImageDataToPngNodeJs(a):this._encodeImageDataToPngCanvas(a)}},{key:"generateImageId",value:function(e,a){return"F"+a}},{key:"generateAnimationId",value:function(e,a){return"A"+a}},{key:"smilSvgAnimationFromImageDataFramesGif",value:function(e){for(var a=this.q,t="",n="",i=0;i<e.frames.length;i++){var r=e.frames[i],o=this.encodeImageDataToPng(r),d=this.generateImageId(e,i),s="<image id="+a+d+a+" height="+a+"100%"+a+" width="+a+"0"+a+" A:href="+a+o+a+"/>",g=this.generateAnimationId(e,i),u="";u+=0===i?this.generateAnimationId(e,e.frames.length-1)+".end; 0s":this.generateAnimationId(e,i-1)+".end;";var f="<set id="+a+g+a+" A:href="+a+"#"+d+a+" attributeName="+a+"width"+a+" to="+a+"100%"+a+" dur="+a+r.delay+"ms"+a+" begin="+a+u+a+"/>";n+=f,t+=s}return t+=n,t=this.wrapInSvgHeader(t,e.width,e.height)}}]),i}();e.__isNode?module.exports=i:e.gif2asvg=i}("undefined"==typeof window?global:window);
//# sourceMappingURL=gif2asvg.full.min.js.map
