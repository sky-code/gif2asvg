"use strict";function testRun(){var e=require("fs"),a="./convert/overlay12.gif",t=e.readFileSync(a),n=gif2asvg.smilSvgAnimationFromImageDataGif(t);e.writeFileSync(a+".svg",n,"utf8")}var ImageInfo={};ImageInfo.isNode="undefined"==typeof window,ImageInfo.createImageData=function(e,a){if(ImageInfo.isNode){var t=Uint8ClampedArray||Uint8Array,n={width:e,height:a};return n.data=new t(e*a*4),n}var i=window.document.createElement("canvas").getContext("2d");return i.createImageData(e,a)},ImageInfo.fromGifReader=function(e){var a=ImageInfo.createImageData(e.width,e.height);a.frames=[];for(var t=0;t<e.numFrames();t++){var n=e.frameInfo(t),i=n.width,g=n.height,r=ImageInfo.createImageData(i,g);r.data_length=n.data_length,r.data_offset=n.data_offset,r.delay=n.delay,r.disposal=n.disposal,r.has_local_palette=n.has_local_palette,r.interlaced=n.interlaced,r.palette_offset=n.palette_offset,r.transparent_index=n.transparent_index,r.x=n.x,r.y=n.y,e.decodeAndBlitFrameRGBA(t,r.data),a.frames[t]=r,r.delay&&(r.delay=10*r.delay)}return a.loopCount=e.loopCount(),a.loopCount||(a.loopCount=-1),a},ImageInfo.isNode&&(module.exports=ImageInfo);var gif2asvg={};if(gif2asvg.isNode="undefined"==typeof window,gif2asvg.isNode)var omggif=require("omggif"),ImageInfo=require("./image-info");else window.omggif={GifWriter:GifWriter,GifReader:GifReader};gif2asvg.isNode&&"undefined"==typeof btoa&&(global.btoa=function(e){var a;return a=e instanceof Buffer?e:new Buffer(e.toString(),"binary"),a.toString("base64")}),gif2asvg.convertDataURIToBinary=function(e){for(var a=";base64,",t=e.indexOf(a)+a.length,n=e.substring(t),i=window.atob(n),g=i.length,r=new Uint8Array(new ArrayBuffer(g)),o=0;g>o;o++)r[o]=i.charCodeAt(o);return r},gif2asvg.convertBinaryToBase64=function(e){for(var a,t=32768,n=0,i=e.length,g="";i>n;)a=e.subarray(n,Math.min(n+t,i)),g+=String.fromCharCode.apply(null,a),n+=t;return btoa(g)},gif2asvg.encodeSvgAsBase64=function(e){return"data:image/svg+xml;base64,"+btoa(e)},gif2asvg.wrapInSvgHeader=function(e,a,t){var n='<svg xmlns="http://www.w3.org/2000/svg" xmlns:A="http://www.w3.org/1999/xlink" width="'+a+'" height="'+t+'">',i="</svg>";return n+e+i},gif2asvg.smilSvgAnimationFromBase64Gif=function(e){return gif2asvg.smilSvgAnimationFromImageDataGif(gif2asvg.convertDataURIToBinary(e))},gif2asvg.smilSvgAnimationFromImageDataGif=function(e){var a=new omggif.GifReader(e),t=ImageInfo.fromGifReader(a);return gif2asvg.smilSvgAnimationFromImageDataFramesGif(t)},gif2asvg._encodeImageDataToPngCanvas=function(e){var a=window.document.createElement("canvas");a.width=e.width,a.height=e.height;var t=a.getContext("2d");return t.putImageData(e,0,0),a.toDataURL("image/png")},gif2asvg._encodeImageDataToPngNodeJs=function(e){var a=require("pngjs").PNG,t=new a;t.width=e.width,t.height=e.height,t.data=new Buffer(e.data);var n=a.sync.write(t),i="data:image/png;base64,"+gif2asvg.convertBinaryToBase64(n);return i},gif2asvg.encodeImageDataToPng=function(e){return gif2asvg.isNode?gif2asvg._encodeImageDataToPngNodeJs(e):gif2asvg._encodeImageDataToPngCanvas(e)},gif2asvg.generateImageId=function(e,a){return"F"+a},gif2asvg.generateAnimationId=function(e,a){return"A"+a},gif2asvg.smilSvgAnimationFromImageDataFramesGif=function(e){for(var a="",t="",n=0;n<e.frames.length;n++){var i=e.frames[n],g=gif2asvg.encodeImageDataToPng(i),r=gif2asvg.generateImageId(e,n),o='<image id="'+r+'" height="100%" width="0" A:href="'+g+'"/>',f=gif2asvg.generateAnimationId(e,n),s="";s+=0===n?gif2asvg.generateAnimationId(e,e.frames.length-1)+".end; 0s":gif2asvg.generateAnimationId(e,n-1)+".end;";var d='<set id="'+f+'" A:href="#'+r+'" attributeName="width" to="100%" dur="'+i.delay+'ms" begin="'+s+'"/>';t+=d,a+=o}return a+=t,a=gif2asvg.wrapInSvgHeader(a,e.width,e.height)};